@model Admin_Panel.ViewModels.ProductCreateViewModel
@* @model Admin_Panel.Models.Product *@

@{
    ViewData["Title"] = "Create";
}

<div class="container">
    <h1 class="text-center mt-4">Create</h1>
    <h4 class="text-center">Product</h4>
    <hr />
    <div class="row justify-content-center">
        <div class="col-md-6">
            <form enctype="multipart/form-data" asp-action="Create"  >
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <div class="form-group">
                    <label asp-for="Name" class="control-label"></label>
                    <input asp-for="Name" class="form-control" />
                    <span asp-validation-for="Name" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="ShortName" class="control-label"></label>
                    <input asp-for="ShortName" class="form-control" />
                    <span asp-validation-for="ShortName" class="text-danger"></span>
                </div>
                   <div class="form-group" id="hiddenId">
        <label asp-for="Photo" class="file-input-label">
           
        </label>
        <div id="previewImg">
       
    </div>
        <input asp-for="Photo" type="file" id="uploadFile" name="Photo" class="form-control"/>
               <input type="hidden" id="previewImageId" name="ImageId" >
     
    </div>
                     @*
                     old save img
                      <div class="form-group" id="hiddenId">
        <label asp-for="Photo" class="file-input-label">
           
        </label>
        
        <input asp-for="Photo" type="file" id="uploadFile" name="Photo" class="form-control"/>
     
    </div> *@
  <!-- Add a new file input for multiple file uploads -->
    @* <div class="form-group" id="hiddenId">
        <label asp-for="Gallery">Gallery Images</label>
        <input asp-for="Gallery" type="file" name="Gallery" id="galleryFiles" multiple class="form-control" />
    </div> *@
      <div class="align">

</div>
<div id="imageGridWrapper">
   
   
</div>
    
  <!-- Add a new file input for multiple file uploads -->
    <div class="form-group" id="hiddenId">
        <label asp-for="Gallery">Gallery Images</label>
        <input asp-for="Gallery" type="file" name="Gallery" id="galleryFiles" multiple class="form-control" />
        <input type="hidden" id="uploadedImageIds" name="UploadedImageIds"   />
      
    </div>


           <div class="form-group row">
   <label asp-for="Brands" class="control-label col-md-3">Brand</label>

    <div class="input-group">
        <select asp-for="Brands" class="form-control" id="brandDropdown" size="1" style="height: auto; overflow-y: scroll;">
           <option value="" selected>Select a brand</option>
            @foreach (var item in ViewBag.Brands)
            {
                <option value="@item.Value">@item.Text</option>
            }
        </select>
    </div>
  
    <input type="hidden"  name="BrandId"  id="SelectedBrand" />
</div>

                 @* Categories *@
                 <div class="form-group">
    <label asp-for="Categories" class="control-label">Category</label>
    <div class="location-popup-categories">
        @foreach (var categoryGroup in ViewBag.Categories)
        {
            <div class="category-group">
                <strong>@categoryGroup.Key</strong>
                @foreach (var category in categoryGroup)
                {
                    <label class="checkbox-entry" data-id="@category.Id">
                        <input type="checkbox" name="Categories" class="categories" data-id="@category.Id">
                        <span>@category.Title</span>
                    </label>
                }
            </div>
        }
    </div>
    <input type="hidden" id="selectedCategories" name="SelectedCategories" />
</div>
                     @* <div class="form-group">
                      <label asp-for="Categories" class="control-label">Category</label>
                      <select asp-for="Categories" multiple="true" class="form-select" asp-items="@ViewBag.Categories">
                          <option value="">Select a category</option>
                      </select>
                  </div> *@
                 @* Categories *@

                  <div class="form-group">
                   <label asp-for="Marks" class="control-label">Mark</label>
                 @* asp-items="@ViewBag.Marks"  *@
                 <div class="location-popup-radios">
                 @foreach (var item in ViewBag.Marks){
                   <label class="checkbox-entry"  data-id="@item.Value">
                    @* asp-for="Marks"  *@
                <input type="checkbox" name="Marks" class="marks" data-id="@item.Value">
                <span>@item.Text</span>
            </label>
            }
            </div>
                 
                   @* <select asp-for="Marks"  size="5"   style="height: auto;" class="form-select"  id="TestMarks" multiple>
                    <option value="">Select a mark</option> 
                     @foreach (var item in ViewBag.Marks)
                       {<option value="@item.Id">@item.Title</option>}
                   </select> *@
                   <input type="hidden" id="selectedMarks" name="SelectedMarks" />
                  </div>


        
 
 <div class="form-group row">
    <label asp-for="Attributes" class="control-label col-md-3">Attribute</label>
   
    <div class="input-group">
        <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="attributeDropdown" data-bs-toggle="dropdown" aria-haspopup="true" >
                Select an attribute
            </button>
            <div class="dropdown-menu" aria-labelledby="attributeDropdown">
                @foreach (var item in ViewBag.Attributes)
                {
                    <a class="dropdown-item" href="#" data-value="@item.Value">@item.Text</a>
                }
            </div>
        </div>
        <input type="text" class="form-control" id="attributeValueInput" placeholder="Attribute Value">
        <button type="button" class="btn btn-success" id="addAttributeBtn">+</button>
    </div>
     <div id="selectedAttributesList" class="mt-2">
        <!-- Вибрані атрибути будуть тут -->
    </div>
    @* name="SelectedAttributes"  *@
    <input type="hidden"  name="SelectedAttributes[]"  id="SelectedAttributes" />
</div>
 @* працююча версыя з атрибутами <div class="form-group row">
        <label asp-for="Attributes" class="control-label col-md-3">Attribute</label>
         <div id="selectedAttributesList" class="mt-2">
            <!-- Вибрані атрибути будуть тут -->
        </div>
        <div class="input-group">
            <select asp-for="Attributes" class="form-select custom-select" asp-items="@ViewBag.Attributes"  size="1">
             
            </select>
            <input type="text" class="form-control" id="attributeValueInput" placeholder="Attribute Value">
            <button type="button" class="btn btn-success" id="addAttributeBtn">+</button>
        </div>
       
        <input type="hidden" asp-for="Attributes" id="hiddenAttributes" />
    </div> *@

                
               
                <div class="form-group">
                    <label asp-for="Description" class="control-label"></label>
                    <input asp-for="Description" class="form-control" />
                    <span asp-validation-for="Description" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="ShortDescription" class="control-label"></label>
                    <input asp-for="ShortDescription" class="form-control" />
                    <span asp-validation-for="ShortDescription" class="text-danger"></span>
                </div>
               
               
                <div class="form-group">
                    <label asp-for="Price" class="control-label"></label>
                    <input asp-for="Price"  class="form-control" />
                    <span asp-validation-for="Price" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="DiscountedPrice" class="control-label"></label>
                    <input asp-for="DiscountedPrice"  class="form-control" />
                    <span asp-validation-for="DiscountedPrice" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="Sku" class="control-label"></label>
                    <input asp-for="Sku"  class="form-control" />
                    <span asp-validation-for="Sku" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="Quantity" class="control-label"></label>
                    <input asp-for="Quantity"  class="form-control" />
                    <span asp-validation-for="Quantity" class="text-danger"></span>
                </div>
                
              
              
                <div class="form-group text-center">
                    <button type="submit" class="btn create-product btn-primary">Create</button>
                </div>
            </form>
        </div>
    </div>
    <div class="text-center mt-3">
        <a asp-action="Index" class="btn btn-secondary">Back to List</a>
    </div>
</div>

@section Scripts {
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css"  crossorigin="anonymous">

@* <script src="https://code.jquery.com/jquery-3.6.4.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"  crossorigin="anonymous"></script> *@
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
